<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>I Learn Vue.js</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>    
    <link href="chat.css" rel="stylesheet">
    <div class="ocWidget__chat" style="left: 271px; top: 20px; position: fixed;">
        <div class="ocWidget__chat__top-wrapper">
            <!-- FRAME TOP -->
            <div class="ocWidget__chat__top">
                <div class="ocWidget__chat__top-allHeading ocWidget-heading">БилетАвто</div>
                <div class="ocWidget__chat__top-msgHeading ocWidget-description">веб-чат с компанией</div>
                <div class="ocWidget__chat__top-icoX" data-onclick="ocWidget.chat.hide()"></div>
            </div>
        </div>
        <div class="ocWidget__chat__mid-wrapper">
            <!-- FRAME MIDDLE -->
            <div class="ocWidget__chat__mid" style="">
                <!-- ИНТЕРФЕЙС ЗАГРУЗКИ -->
                <div class="ocWidget_loading-block">
                    <div class="ocWidget_loading-sphere"></div>
                </div>
                <!-- ИНТЕРФЕЙС ЧАТА -->
                <div class="ocWidget__chat__mid__msg" data-onscroll="ocWidget.chat.msg.pagination.scroll(event)">
                    <div id="hAsBYLZqJ5" class="ocWidget__message-sent ocAnimation-fadeIn">
                        <!-- ИНТЕРФЕЙС ИСХОДЯЩЕГО СООБЩЕНИЯ -->
                        <div class="ocWidget__chat__mid__msg__sentMessage" data-onclick="ocWidget.chat.msg.message.retry(event, el)">
                            <div class="ocWidget__chat__mid__msg__sentMessage__message">
                                <div class="ocWidget__chat__mid__msg__sentMessage__message-text ocWidget-text">тест</div>
                                <div class="ocWidget__chat__mid__msg__sentMessage__message-date ocWidget-description">Вы 16 апреля в 10:04</div>
                                <div class="ocWidget__chat__mid__msg__sentMessage__message-loading">
                                    <div class="ocWidget_spinner"> <span class="ocWidget__chat__mid__msg__sentMessage__message-loading--loading ocWidget-description">Отправка</span>
                                        <div class="ocWidget_bounce1"></div>
                                        <div class="ocWidget_bounce2"></div>
                                        <div class="ocWidget_bounce3"></div>
                                    </div>
                                </div>
                                <div class="ocWidget__chat__mid__msg__sentMessage__message--deliver"> <span class="ocWidget__chat__mid__msg__sentMessage__message--deliver-not ocWidget-description">сообщение не доставлено</span> <span class="ocWidget__chat__mid__msg__sentMessage__message--deliver-refresh ocWidget-description">повторить</span> </div>
                            </div>
                        </div>
                    </div>
                    <div class="ocWidget__operator ocAnimation-fadeIn">
                        <!-- ИНТЕРФЕЙС ОПЕРАТОРА -->
                        <div class="ocWidget__chat__mid__msg__operator">
                            <div class="ocWidget__chat__mid__msg__operator-photo"> <img draggable="false" src="https://rtc-web-nd3.rostelecom-cc.ru/fileStorage/files/thumb/eb13fea48dddbf11544bc73a9511af05.png" alt=""> </div>
                            <div class="ocWidget__chat__mid__msg__operator-name ocWidget-text">Марианна</div>
                            <!-- <div class="ocWidget__chat__mid__msg__operator-name ocWidget-text"></div> --></div>
                    </div>
                    <div class="ocWidget__message-received ocAnimation-fadeIn ocWidget-message-group">
                        <!-- ИНТЕРФЕЙС ВХОДЯЩЕГО СООБЩЕНИЯ -->
                        <div class="ocWidget__chat__mid__msg__receivedMessage">
                            <div class="ocWidget__chat__mid__msg__receivedMessage__message">
                                <div class="ocWidget__chat__mid__msg__receivedMessage__message-text ocWidget-text">Добро пожаловать! В течение нескольких минут вам ответит наш специалист.</div>
                                <div class="ocWidget__chat__mid__msg__receivedMessage__message-date ocWidget-description">Марианна 16 апреля в 10:04</div>
                            </div>
                        </div>
                    </div>
                    <div class="ocWidget__message-received ocAnimation-fadeIn">
                        <!-- ИНТЕРФЕЙС ВХОДЯЩЕГО СООБЩЕНИЯ -->
                        <div class="ocWidget__chat__mid__msg__receivedMessage">
                            <div class="ocWidget__chat__mid__msg__receivedMessage__message">
                                <div class="ocWidget__chat__mid__msg__receivedMessage__message-text ocWidget-text">Здравствуйте! Меня зовут Марианна, чем я могу Вам помочь?</div>
                                <div class="ocWidget__chat__mid__msg__receivedMessage__message-date ocWidget-description">Марианна 16 апреля в 10:05</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ocWidget__chat__bot-wrapper">
            <!-- CHAT BOTTOM START -->
            <div class="ocWidget__chat__bot">
                <!-- CHAT -->
                <div class="ocWidget__chat__bot__msg" style="height: 78px;">
                    <!-- TEXTAREA MSG -->
                    <textarea placeholder="Введите текст сообщения" 
                              class="ocWidget__chat__bot__msg-textarea" 
                              style="height: 33px;"></textarea>
                    <div class="ocWidget__chat__bot__msg-send ocWidget-btnBg" data-onclick="ocWidget.chat.msg.message.send()">Отправить</div>
                </div>
                <!-- CSI -->
                <div class="ocWidget__chat__bot__csi">
                    <div class="ocWidget__chat__bot__csi-send ocWidget-btnBg">Отправить</div>
                </div>
            </div>
            <!-- CHAT BOTTOM END -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script>
        Vue.component('todo-item', {
            props: ['index', 'title', 'note', 'isedit'],
            methods: {
                showForm: function(index) {
                    //alert('Во внутреннюю функцию зашёл, индекс: ' + index);
                    this.$emit('show', index);
                },
                hideForm: function(index, title, note) {
                    this.$emit('hide', index, title, note);
                }
            },
            template: ' \
            <div class="todo-item-elem">\
                <div class="content" v-show="!isedit">\
                    <h4 class="zero-margin">{{ title }}</h4>\
                    <small class="text-muted">{{ note }}</small>\
                    <div class="text-right">\
                        <i class="fa fa-pencil-square-o cur_btn" aria-hidden="true" v-on:click="showForm(index)"></i>\
                        <i class="fa fa-trash cur_btn" aria-hidden="true" v-on:click="$emit(\'remove\')"></i>\
                    </div>\
                </div>\
                <div class="content" v-show="isedit">\
                    <div class="ui form">\
                        <div class="field">\
                            <label>Заметка</label>\
                            <input class="form-control" type="text" v-model="title">\
                            <label>Примечание</label>\
                            <input class="form-control" type="text" v-model="note">\
                        </div>\
                        <div class="todo-btn">\
                            <button class="btn btn-danger btn-block" v-on:click="hideForm(index, title, note)"> \
                                <label>Закрыть</label> \
                            </button>\
                        </div>\
                    </div>\
                </div>\
            </div>',
        })
        new Vue({
            el: '#todo-list-example',
            data: {
                newTodoTitle: '',
                newTodoNote: '',
                todos: [{
                    id: 0,
                    title: 'Todo B',
                    note: 'Project B',
                    isedit: false
                }],
                nextTodoId: 1
            },
            methods: {
                addNewTodo: function() {
                    if (this.newTodoTitle != '' && this.newTodoNote != '') {
                        this.todos.push({
                            id: this.nextTodoId++,
                            title: this.newTodoTitle,
                            note: this.newTodoNote,
                            isedit: false
                        })
                        this.newTodoTitle = '';
                        this.newTodoNote = '';
                        //alert(this.todos[this.nextTodoId-1].isedit);
                    } else {
                        alert('Пожалуйста, заполните поля');
                    }
                },
                show: function(index) {
                    //this.todos[index].isedit = true;
                    for (let key in this.todos) {
                        //console.log(this.todos[key]);
                        if (this.todos[key].id == index) {
                            this.todos[key].isedit = true;
                        }
                    }
                },
                hide: function(index, title, note) {
                    for (let key in this.todos) {
                        //console.log(this.todos[key]);
                        if (this.todos[key].id == index) {
                            this.todos[key].isedit = false;
                            this.todos[key].title = title;
                            this.todos[key].note = note;
                        }
                    }
                }
            }
        })
    </script>
</body>

</html>
